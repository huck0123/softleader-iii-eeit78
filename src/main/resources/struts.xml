<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

	<include file="struts-givers.xml"/>
	<include file="struts-campaign.xml"/>
	<constant name="struts.objectFactory" value="spring" /><!-- 把Action交給spring -->
	<constant name="struts.devMode" value="true" />
	<constant name="struts.ui.theme" value="simple" />
	<constant name="struts.enable.DynamicMethodInvocation" value="true" />
	<constant name="struts.custom.i18n.resources" value="locale/global" />

	<package name="loginPackage" namespace="/login" extends="struts-default">
		<action name="loginAction" class="loginAction">
			<result name="success" type="redirect">/index.jsp</result>
			<result name="login">/META-INF/login/login.jsp</result>
			<!-- <result name="login">/index.jsp</result> -->
		</action>

		<action name="*">
			<result>/META-INF/login/{1}.jsp</result>                      <!-- 沒有name屬性代表name="sucess" -->
		</action>
	</package>

	

	<package name="raiserPackage" namespace="/raiser" extends="struts-default">

		<action name="raiserAction" class="tw.org.iiiedu.thegivers.web.RaiserAction">
			<result name="insert" type="redirect">/index.jsp</result>
			<result name="update" type="redirect">/index.jsp</result>
			<result name="select" type="redirect">/index.jsp</result>
		</action>

		<action name="*">
			<result>/META-INF/login/{1}.jsp</result>                      <!-- 沒有name屬性代表name="sucess" -->
		</action>
	</package>


	<package name="user-defined" abstract="true" extends="struts-default">

		<interceptors>
			<!--定義一個名為authentication的自定攔截器 -->
			<interceptor
				class="tw.org.iiiedu.thegivers.interceptor.CampaignAuthentication"
				name="campaignAuthentication" />
			<!--定義一個驗證登入的攔截器堆疊 -->
			<interceptor-stack name="campaignDefault">
				<interceptor-ref name="defaultStack" />         <!--堆疊內設定原Struts2內建的: 預設攔截器堆疊 -->
				<interceptor-ref name="campaignAuthentication" />     <!--堆疊內設定前述名為authentication的: 自定攔截器 -->
			</interceptor-stack>
		</interceptors>

	</package>





	<package name="default" namespace="/" extends="struts-default">

		<action name="page" class="demoAction" method="page">
			<result name="success">/WEB-INF/page/demo_page.jsp</result>
		</action>

		<action name="demo" class="demoAction" method="execute">
			<result name="success">/WEB-INF/page/demo_success.jsp</result>
			<result name="fail">/WEB-INF/page/demo_page.jsp</result>
		</action>

		<action name="ajaxDemo" class="ajaxDemoAction" method="ajax">
			<result name="success" type="stream">
				<param name="contentType">appliction/json</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
	</package>


	<!-- <package name="giver" namespace="/giver" extends="user-defined"> <action 
		name="page" class="demoAction" method="page"> one can use the defaultStack 
		or customized Stack as interceptors stack on the action <interceptor-ref 
		name="myAuthenticationDefault" /> <interceptor-ref name="defaultStack" /> 
		<result name="success">/WEB-INF/page/demo_page.jsp</result> </action> <global-results> 
		<result name="login">/secure/login.jsp</result> </global-results> <action 
		name="*"> <result name="success">/META-INF/{1}.jsp</result> 沒有name屬性代表name="sucess" 
		</action> </package> -->



</struts>
